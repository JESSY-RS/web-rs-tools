<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="favicon-kiokucalc2.ico">
    <link rel="apple-touch-icon" href="apple-touch-icon-kiokucalc2.png">
    <link rel="icon" type="image/png" href="android-chrome-144x144-kiokucalc2.png">
    <title>è¨˜æ†¶å†æˆ¦å›æ•°è¨ˆç®—</title> <!-- Created by ã˜ã‡ -->

    <style>
        /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            margin: 20px;
            background-color: #2A2A2A;
            color: #eee;
        }

        /* è¦‹å‡ºã—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .header {
            display: flex;
            align-items: flex-end;
        }

        .title {
            font-size: 36px;
            font-weight:bold;
            color: fuchsia;
            margin-right: 10px;
            margin-top: -10px;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 24px;
            font-weight:bold;
            color: aqua;
            margin-top: 0px;
            margin-bottom: 20px;
        }

        /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="number"] {
            width: 70px;
            font-size: 32px;
            padding: 5px;
            text-align: right;
        }

        .input-group1 label {
            font-size: 20px;
            margin-right: 5px;
        }

        .input-group1 {
            margin-bottom: 10px;
        }

        .input-group2 label {
            font-size: 20px;
            margin-right: 5px;
        }

        .input-group2 {
            margin-bottom: 10px;
        }

        .input-group3 label {
            font-size: 20px;
            margin-right: 5px;
        }

        .input-group3 {
            margin-bottom: 10px;
        }

        /* ã‚³ãƒ­ãƒ³éƒ¨åˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .separator {
            font-size: 32px;
            margin-left: 1px;
            margin-right: 1px;
        }

        /* å…¥åŠ›æ¬„ï¼’ã®èƒŒæ™¯è‰² */
        #input2-min, #input2-sec {
            background-color: #888;
        }

        /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        button {
            font-size: 28px;
            padding: 5px 12px;
            margin-top: 5px;
            margin-bottom: 15px;
        }

        /* æ‰‹å‹•å…¥åŠ›æ¬„ */
        #manual-input {
            width: 210px;
            font-size: 30px;
            padding: 8px;
            text-align: left;
            margin-top: 5px;
            margin-bottom: 15px;
            display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
        }

        /* 24æ™‚é–“ã§è¨ˆç®—ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #c24hButton {
            font-size: 28px;
            padding: 5px 20px;
        }


        /* ã‚³ãƒ”ãƒ¼ç”¨ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #copyButton {
            font-size: 28px;
            padding: 5px 20px;
            display: none; /* åˆæœŸçŠ¶æ…‹ã§ã¯éè¡¨ç¤º */
        }

        /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #warning {
            color: red;
            height: 32px;
            margin-top: 5px;
            margin-bottom: 20px;
        }

        /* çµæœè¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .result {
            font-size: 42px;
            font-weight:bold;
            margin-top: 5px;
        }

        .result-label {
            color: #1D9BF0;
        }

        .result-time {
            font-size: 42px;
            color: #eee;
        }

        .unit-str {
            font-size: 40px;
        }

        /* ãƒœãƒˆãƒ ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .bottom {
            font-size: 16pt;
            margin-top: 0px;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        footer {
            border-top: 1px solid #eee;
            padding-top: 10px;
            font-size: 16pt;
            margin-top: 20px;
        }

        /* ãƒªãƒ³ã‚¯ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        a:link {
            color: #1D9BF0;
            text-decoration: underline;
        }

        a:visited {
            color: #7755FF;
            text-decoration: underline;
        }

        a:hover {
            color: #0CFF57;
        }

        a:active {
             color: #FF0000;
             text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <span class="title">è¨˜æ†¶å†æˆ¦</span>
            <span class="subtitle">ğŸƒå›æ•°è¨ˆç®—</span>
        </div>

        <div class="input-group1">
            <label for="input1-min">å…¥åŠ›æ¬„ï¼‘</label>
            <input type="number" id="input1-min" min="0" onfocus="this.select()" onkeydown="handleEnter(event, 'input1-sec')">
            <span class="separator">:</span>
            <input type="number" id="input1-sec" min="0" onfocus="this.select()" onkeydown="handleEnter(event, 'total-time-hour')">
        </div>

        <div class="input-group2">
            <label for="input2-min">å…¥åŠ›æ¬„ï¼’</label>
            <input type="number" id="input2-min" min="0" onfocus="this.select()">
            <span class="separator">:</span>
            <input type="number" id="input2-sec" min="0" onfocus="this.select()">
        </div>


        <div class="input-group3">
            <label for="total-time-hour">æ‰€è¦æ™‚é–“</label>
            <button id="reflect-button" onclick="reflectClipboard()">ã‚³ãƒ”ãƒš</button>
            <input type="button" id="c24hButton" value="24ï¼¨" onclick="calclate24hour()">

            <input type="text" id="manual-input" placeholder="æ‰‹å‹•ã§è²¼ã‚Šä»˜ã‘" ><br>
            <input type="number" id="total-time-hour" min="0" placeholder="æ™‚" onfocus="this.select()" onkeydown="handleEnter(event, 'total-time-min')">
            <span class="separator">:</span>
            <input type="number" id="total-time-min" min="0" placeholder="åˆ†" onfocus="this.select()" onkeydown="handleEnter(event, 'total-time-sec')">
            <span class="separator">:</span>
            <input type="number" id="total-time-sec" min="0" placeholder="ç§’" onfocus="this.select()" onkeydown="handleEnter(event, 'calculate-button')">
        </div>

        <p id="warning"></p>

        <button id="calculate-button" onclick="calculateCount()">è¨ˆç®—ã™ã‚‹</button>

        <input type="button" id="copyButton" value="çµæœã‚³ãƒ”ãƒ¼" onclick="copyToClipboard()">

        <div class="result">
            <span class="result-label">çµæœ: </span><span id="result" class="result-time">--</span><span class="unit-str">å›</span>
        </div>
    </div>

ã€€ã€€<div class="bottom"><a href="kiokucalc.html">æ‰€è¦æ™‚é–“ã‚’è¨ˆç®—ã™ã‚‹</a></br></div>

    <footer>
        â€»ä½¿ç”¨ã¯è‡ªå·±è²¬ä»»ã«ã¦ã€‚<br>
        â€»ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨å„é …ç›®ãŒåˆæœŸå€¤ã«æˆ»ã‚Šã¾ã™ã€‚<br>
        <br>
        <a href="index.html">TOPã¸æˆ»ã‚‹</a></br>
    </footer>

    <script>
        // åˆæœŸå€¤ã®å®šç¾©
        const initialValues = {
            input1Min: '',
            input1Sec: '',
            input2Min: '0',
            input2Sec: '13',
            manuinput: '',
            totalHour: '',
            totalMin: '',
            totalSec: ''
        };

        function parseTime(hours, minutes, seconds) {
            return (hours * 3600) + (minutes * 60) + seconds;
        }

        function formatTime(totalSeconds) {
            let hours = Math.floor(totalSeconds / 3600);
            let minutes = Math.floor((totalSeconds % 3600) / 60);
            let seconds = totalSeconds % 60;
            return `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function calculateTotalTime() {
            let input1Min = document.getElementById('input1-min').value || 0;
            let input1Sec = document.getElementById('input1-sec').value || 0;
            let input2Min = document.getElementById('input2-min').value || 0;
            let input2Sec = document.getElementById('input2-sec').value || 0;

            let time1 = parseTime(0, parseInt(input1Min), parseInt(input1Sec));
            let time2 = parseTime(0, parseInt(input2Min), parseInt(input2Sec));
            let totalTime = (time1 + time2) * parseInt(count);

            document.getElementById('result').innerText = formatTime(totalTime);
        }

        function calculateCount() {
            const manualInput = document.getElementById('manual-input').value;
            const warning = document.getElementById('warning');

            // manual-inputãŒå…¥åŠ›ã•ã‚Œã¦ã„ã‚‹å ´åˆ
            if (manualInput) {
                const timeMatch = manualInput.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);
                if (!timeMatch) {
                    warning.innerText = "â€»HH:MM:SSå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";
                    return;
                }

                // æ™‚é–“ã‚’åˆ†è§£ã—ã¦å„é …ç›®ã«åæ˜ 
                const [_, hours, minutes, seconds] = timeMatch;
                document.getElementById('total-time-hour').value = parseInt(hours, 10);
                document.getElementById('total-time-min').value = parseInt(minutes, 10);
                document.getElementById('total-time-sec').value = parseInt(seconds, 10);
            }

            // å„å…¥åŠ›æ¬„ã‚’å–å¾—
            let input1Min = document.getElementById('input1-min');
            let input1Sec = document.getElementById('input1-sec');
            let input2Min = document.getElementById('input2-min');
            let input2Sec = document.getElementById('input2-sec');
            let totalTimeHour = document.getElementById('total-time-hour');
            let totalTimeMin = document.getElementById('total-time-min');
            let totalTimeSec = document.getElementById('total-time-sec');

            // æœªå…¥åŠ›ã®å ´åˆã« 0 ã‚’è¨­å®š
            if (!input1Min.value) input1Min.value = 0;
            if (!input1Sec.value) input1Sec.value = 0;
            if (!input2Min.value) input2Min.value = 0;
            if (!input2Sec.value) input2Sec.value = 0;
            if (!totalTimeHour.value) totalTimeHour.value = 0;
            if (!totalTimeMin.value) totalTimeMin.value = 0;
            if (!totalTimeSec.value) totalTimeSec.value = 0;

            // è¨ˆç®—å‡¦ç†
            let totalRetryTime = parseTime(0, parseInt(input1Min.value), parseInt(input1Sec.value)) +
                                 parseTime(0, parseInt(input2Min.value), parseInt(input2Sec.value));
        
            let totalTime = parseTime(parseInt(totalTimeHour.value), parseInt(totalTimeMin.value), parseInt(totalTimeSec.value));
            let count = Math.floor(totalTime / totalRetryTime);

            // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
            document.getElementById('warning').innerText = ""; 
            document.getElementById('result').innerText = count;

            // ã‚³ãƒ”ãƒ¼ç”¨ãƒœã‚¿ãƒ³ã‚’è¡¨ç¤º
            document.getElementById('copyButton').value = 'çµæœã‚³ãƒ”ãƒ¼';
            document.getElementById('copyButton').style.display = 'inline-block';
        }

        async function reflectClipboard() {
            try {
                // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã‚’å–å¾—
                const text = await navigator.clipboard.readText();

                // ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ "HH:MM:SS" ã‚’ç¢ºèª
                const match = text.match(/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/);

                if (match) {
                    // å„å€¤ã‚’å–å¾—ã—ã¦åæ˜ 
                    const [_, hours, minutes, seconds] = match;
                    document.getElementById('total-time-hour').value = parseInt(hours, 10);
                    document.getElementById('total-time-min').value = parseInt(minutes, 10);
                    document.getElementById('total-time-sec').value = parseInt(seconds, 10);
                    document.getElementById('warning').innerText = ""; // ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ã‚¯ãƒªã‚¢
                } else {
                    document.getElementById('warning').innerText = "â€»ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã®å†…å®¹ãŒä¸æ­£ã§ã™ã€‚HH:MM:SSå½¢å¼ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚";

                    // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã—ã¦æ‰‹å‹•å…¥åŠ›æ¬„ã‚’è¡¨ç¤º
                    document.getElementById('reflect-button').style.display = 'none';
                    document.getElementById('manual-input-group').style.display = 'inline-block';

                   // 24æ™‚é–“ã§è¨ˆç®—ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
                   document.getElementById('c24hButton').style.display = 'none';
                }
            } catch (error) {
                document.getElementById('warning').innerText = "â€»åæ˜ å‡ºæ¥ã¾ã›ã‚“ã§ã—ãŸã€‚ãŠæ‰‹æ•°ã§ã™ãŒæ‰‹å‹•ã§è²¼ã‚Šä»˜ã‘ã¦ãã ã•ã„ã€‚";

                // ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤ºã«ã—ã¦æ‰‹å‹•å…¥åŠ›æ¬„ã‚’è¡¨ç¤º
                document.getElementById('reflect-button').style.display = 'none';
                document.getElementById('manual-input').style.display = 'inline-block';

                // 24æ™‚é–“ã§è¨ˆç®—ãƒœã‚¿ãƒ³ã‚’éè¡¨ç¤º
                document.getElementById('c24hButton').style.display = 'none';
            }
        }

        //æ™‚é–“ã‚’24æ™‚é–“ã«è¨­å®šã—ã¦è¨ˆç®—ã™ã‚‹
        function calclate24hour() {
                // æ™‚é–“ã‚’24æ™‚é–“ã«è¨­å®š
                document.getElementById('total-time-hour').value = 24;
                document.getElementById('total-time-min').value = 0;
                document.getElementById('total-time-sec').value = 0;
        }

        // ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«æƒ…å ±ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
        function copyToClipboard() {
            const requiredExp = document.getElementById('result').innerText;
            const tempInput = document.createElement('input');
            tempInput.value = requiredExp;
            document.body.appendChild(tempInput);
            tempInput.select();
            try {
                document.execCommand('copy');
                document.getElementById('copyButton').value = 'ã‚³ãƒ”ãƒ¼å®Œäº†';
            } catch (err) {
                alert('ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼ã§ãã¾ã›ã‚“ã§ã—ãŸ: ' + err);
            }
            document.body.removeChild(tempInput);
        }

        // ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã—ãŸã‚‰å„é …ç›®ã‚’åˆæœŸå€¤ã«æˆ»ã™
        window.onload = function() {
            document.getElementById('input1-min').value = initialValues.input1Min;
            document.getElementById('input1-sec').value = initialValues.input1Sec;
            document.getElementById('input2-min').value = initialValues.input2Min;
            document.getElementById('input2-sec').value = initialValues.input2Sec;
            document.getElementById('manual-input').value = initialValues.manuinput;
            document.getElementById('total-time-hour').value = initialValues.totalHour;
            document.getElementById('total-time-min').value = initialValues.totalMin;
            document.getElementById('total-time-sec').value = initialValues.totalSec;
        }

        // Enterã‚­ãƒ¼æŠ¼ä¸‹æ™‚ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ã‚’ç§»å‹•ã•ã›ã‚‹é–¢æ•°
        function handleEnter(event, nextElementId) {
            if (event.key === 'Enter') {
                event.preventDefault();
                document.getElementById(nextElementId).focus();
            }
        }
    </script>
</body>
</html>
