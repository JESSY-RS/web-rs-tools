<!DOCTYPE html>
<html lang="ja">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¯ãƒªã‚¢ç›®å®‰è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>

    <style>
        /* ãƒšãƒ¼ã‚¸å…¨ä½“ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        body {
            margin: 20px;
            background-color: #2A2A2A;
            color: #eee;
            font-family: sans-serif;
        }

        /* è¦‹å‡ºã—ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .header {
            display: flex;
            align-items: flex-end;
            flex-wrap: wrap;
        }

        .title {
            font-size: 36px;
            font-weight: bold;
            color: dodgerblue;
            margin-right: 8px;
            margin-top: -10px;
            margin-bottom: 15px;
        }

        .subtitle {
            font-size: 24px;
            font-weight: bold;
            color: deeppink;
            margin-top: 0px;
            margin-bottom: 20px;
        }

        /* å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        input[type="text"] {
            width: 250px;
            font-size: 32px;
            padding: 5px;
            text-align: right;
        }

        /* ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        ::placeholder {
            color: #777;
            opacity: 1; /* Firefox */
        }

        .input-group label {
            font-size: 20px;
            margin-right: 5px;
            display: block;
            margin-bottom: 5px;
        }

        .input-group {
            margin-bottom: 20px;
        }

        /* ã‚³ãƒ­ãƒ³éƒ¨åˆ†ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .separator {
            font-size: 32px;
            margin-left: 1px;
            margin-right: 1px;
        }
        
        /* æ™‚é–“å…¥åŠ›æ¬„ã®å¹…ã‚’èª¿æ•´ */
        #turn-min, #turn-sec {
            width: 80px;
        }

        /* ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #warning {
            color: red;
            height: 32px;
            margin-top: 5px;
            margin-bottom: 10px;
            font-size: 18px;
        }

        /* ãƒœã‚¿ãƒ³ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        button {
            font-size: 28px;
            padding: 5px 12px;
            margin-top: 5px;
            margin-bottom: 20px;
            cursor: pointer;
        }

        /* çµæœè¡¨ç¤ºã®ã‚¹ã‚¿ã‚¤ãƒ« */
        .result {
            font-size: 42px;
            font-weight: bold;
        }

        .result-label {
            color: #1D9BF0;
        }

        .result-label2 {
            font-size: 24px;
        }

        .result-time {
            color: #eee;
        }

        /* çµ‚äº†äºˆå®šæ™‚åˆ»ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        #endTimeDisplay {
            font-size: 24px;
            color: red;
            margin-top: 10px;
            height: 32px;
        }

        /* ãƒ•ãƒƒã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
        footer {
            border-top: 1px solid #eee;
            padding-top: 10px;
            font-size: 16pt;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="header">
            <span class="title">ã‚¯ãƒªã‚¢ç›®å®‰</span>
            <span class="subtitle">ğŸ§®è¨ˆç®—ãƒ„ãƒ¼ãƒ«</span>
        </div>

        <div class="input-group">
            <label for="total-hp">æ•µã®HPåˆè¨ˆ</label>
            <input type="text" id="total-hp" inputmode="numeric" oninput="formatNumber(this)" onkeydown="handleEnter(event, 'damage')" onfocus="this.select()">
        </div>

        <div class="input-group">
            <label for="damage">1ä½“ã‚ãŸã‚Šãƒ€ãƒ¡ãƒ¼ã‚¸</label>
            <input type="text" id="damage" inputmode="numeric" oninput="formatNumber(this)" onkeydown="handleEnter(event, 'enemies')" onfocus="this.select()">
        </div>

        <div class="input-group">
            <label for="enemies">æ•µã®æ•°</label>
            <input type="text" id="enemies" inputmode="numeric" oninput="formatNumber(this)" onkeydown="handleEnter(event, 'attacks')" onfocus="this.select()">
        </div>

        <div class="input-group">
            <label for="attacks">æ”»æ’ƒå›æ•°</label>
            <input type="text" id="attacks" inputmode="numeric" oninput="formatNumber(this)" onkeydown="handleEnter(event, 'turn-min')" onfocus="this.select()">
        </div>

        <div class="input-group">
            <label for="turn-min">1ã‚¿ãƒ¼ãƒ³ã‚ãŸã‚Šæ‰€è¦æ™‚é–“</label>
            <input type="text" id="turn-min" inputmode="numeric" placeholder="åˆ†" onkeydown="handleEnter(event, 'turn-sec')" onfocus="this.select()">
            <span class="separator">:</span>
            <input type="text" id="turn-sec" inputmode="numeric" placeholder="ç§’" onkeydown="handleEnter(event, 'calculate-button')" onfocus="this.select()">
        </div>

        <p id="warning"></p>

        <button id="calculate-button" onclick="calculateTurns()">è¨ˆç®—ã™ã‚‹</button>

        <div class="result">
            <span class="result-label">çµæœ: </span><span id="result" class="result-time">--</span>
            <span class="result-label2">ã‚¿ãƒ¼ãƒ³</span>
        </div>
        <div id="endTimeDisplay"></div>
    </div>

    <footer>
        â€»ä½¿ç”¨ã¯è‡ªå·±è²¬ä»»ã«ã¦ã€‚<br>
        â€»ãƒšãƒ¼ã‚¸ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã¨å„é …ç›®ãŒåˆæœŸå€¤ã«æˆ»ã‚Šã¾ã™ã€‚<br>
    </footer>

    <script>
        // --- ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šé–¢é€£ã®é–¢æ•° ---
        function formatNumber(input) {
            // æ•°å­—ä»¥å¤–ã®æ–‡å­—ã‚’å‰Šé™¤
            let num = input.value.replace(/[^0-9]/g, '');
            // ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã«å¤‰æ›
            input.value = num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
        
        function removeCommas(str) {
            if (typeof str !== 'string' || str === '') return 0;
            return parseInt(str.replace(/,/g, ''), 10);
        }

        // --- è¨ˆç®—ã¨è¡¨ç¤ºã®ãƒ¡ã‚¤ãƒ³é–¢æ•° ---
        function calculateTurns() {
            const totalHp = removeCommas(document.getElementById('total-hp').value);
            const damage = removeCommas(document.getElementById('damage').value);
            const enemies = removeCommas(document.getElementById('enemies').value);
            const attacks = removeCommas(document.getElementById('attacks').value);
            const turnMin = parseInt(document.getElementById('turn-min').value, 10) || 0;
            const turnSec = parseInt(document.getElementById('turn-sec').value, 10) || 0;
            
            const warningElement = document.getElementById('warning');
            const resultElement = document.getElementById('result');
            const endTimeElement = document.getElementById('endTimeDisplay');

            // --- å…¥åŠ›å€¤ã®æ¤œè¨¼ ---
            let emptyFields = [];
            if (document.getElementById('total-hp').value === '') emptyFields.push('æ•µã®HPåˆè¨ˆ');
            if (document.getElementById('damage').value === '') emptyFields.push('1ä½“ã‚ãŸã‚Šãƒ€ãƒ¡ãƒ¼ã‚¸');
            if (document.getElementById('enemies').value === '') emptyFields.push('æ•µã®æ•°');
            if (document.getElementById('attacks').value === '') emptyFields.push('æ”»æ’ƒå›æ•°');

            if (emptyFields.length > 0) {
                warningElement.innerText = `â€»${emptyFields.join('ãƒ»')}ã«æ•°å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚`;
                resultElement.innerText = '0';
                endTimeElement.innerText = '';
                return;
            } else {
                warningElement.innerText = '';
            }

            // --- è¨ˆç®—å‡¦ç† ---
            const denominator = damage * enemies * attacks;

            if (denominator === 0) {
                warningElement.innerText = 'â€»ãƒ€ãƒ¡ãƒ¼ã‚¸ãƒ»æ•µã®æ•°ãƒ»æ”»æ’ƒå›æ•°ã«0ä»¥å¤–ã®å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚';
                resultElement.innerText = '0';
                endTimeElement.innerText = '';
                return;
            }

            // ã‚¿ãƒ¼ãƒ³æ•°ã‚’è¨ˆç®— (å°æ•°ç‚¹ä»¥ä¸‹ã‚’åˆ‡ã‚Šä¸Šã’)
            const turns = Math.ceil(totalHp / denominator);
            
            // çµæœã‚’è¡¨ç¤º (ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Š)
            resultElement.innerText = turns.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            resultElement.style.color = '#eee';

            // çµ‚äº†äºˆå®šæ™‚é–“ã‚’è¨ˆç®—ãƒ»è¡¨ç¤º
            const timePerTurn = (turnMin * 60) + turnSec;
            if (timePerTurn > 0) {
                const totalSeconds = turns * timePerTurn;
                // ç·ç§’æ•°ã‚’åˆ†ã«å¤‰æ›ã—ã€å°æ•°ç‚¹ä»¥ä¸‹ã‚’åˆ‡ã‚Šä¸Šã’ã‚‹
                const totalMinutesRoundedUp = Math.ceil(totalSeconds / 60);
                
                const hours = Math.floor(totalMinutesRoundedUp / 60);
                const minutes = totalMinutesRoundedUp % 60;
                
                endTimeElement.innerText = `çµ‚äº†äºˆå®šæ™‚é–“ï¼š${hours}æ™‚é–“${minutes}åˆ†`;
            } else {
                endTimeElement.innerText = ''; // æ™‚é–“æœªå…¥åŠ›ã®å ´åˆã¯ã‚¯ãƒªã‚¢
            }
        }

        // --- Enterã‚­ãƒ¼ã§ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç§»å‹• ---
        function handleEnter(event, nextElementId) {
            if (event.key === 'Enter') {
                event.preventDefault();
                document.getElementById(nextElementId).focus();
            }
        }
        
        // --- ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã«å„é …ç›®ã‚’åˆæœŸåŒ– ---
        window.onload = function () {
            // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ã‚’è¨­å®š
            document.getElementById('total-hp').value = '9,614,400,000';
            document.getElementById('damage').value = '';
            document.getElementById('enemies').value = '4';
            document.getElementById('attacks').value = '3';
            document.getElementById('turn-min').value = '1'; // 1åˆ†
            document.getElementById('turn-sec').value = '0'; // 0ç§’ (åˆè¨ˆ60ç§’)

            // çµæœã¨è­¦å‘Šã®åˆæœŸçŠ¶æ…‹
            document.getElementById('result').innerText = '--';
            document.getElementById('warning').innerText = '';
            document.getElementById('endTimeDisplay').innerText = '';
        }
    </script>
</body>
</html>